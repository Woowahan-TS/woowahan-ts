# [7장] 비동기 호출
## 7.1 API 요청
### fetch로 API 요청하기
- 백엔드에서 API URL을 수정해야 한다고 했을 때 컴포넌트 내부에 깊숙이 자리 잡은 비동기 호출 코드는 이러한 변경 요구에 취약하다.
- 새로운 API 요청 정책이 추가될 때마다 계속해서 비동기 호출 코드를 수정해야 하는 번거로움을 어떻게 해결할까?

### 서비스 레이어로 분리하기
- 단순히 fetch 함수를 분리하는 것만으로는 API 요청 정책이 추가되는 것을 해결하기 어렵다.

### Axios 활용하기
- 각 서버가 담당하는 부분이 다르거나 새로운 프로젝트의 일부로 포함될 때 기존에 사용하던 API Entry(Base URL)와는 다른 새로운 URL로 요청해야 하는 상황이 생길 수 있다.
- 이럴 땐 2개 이상의 API 요청을 처리하는 인스턴스를 따로 구성하면 된다. (어찌보면 당연한 말)
```tsx
const apiRequester: AxiosInstance = axios.create(defaultConfig);
const orderApiRequester: AxiosInstance = axios.create({
  baseURL: "https://api.baemin.or/",
  ...defaultConfig,
});

const orderCartApiRequester: AxiosInstance = axios.create({
  baseURL: "https://cart.baemin.order/",
  ...defaultConfig,
});
```

### Axios 인터셉터 사용하기
- axiosInterceptor를 사용하게 된다면 백엔드 서버 응답에 따라 추가적으로 작동하는 로직을 구현할 수 있다.
- 그런데 요청 옵션에 따라 다른 인터셉터를 만들기 위해 빌더 패턴을 추가하여 APIBuilder 같은 클래스 형태로 구성하기도 한다.
```md
🧐 짚고 넘어가기

빌더 패턴
- 객체 생성을 더 편리하고 가독성 있게 만들기 위한 디자인 패턴 중 하나다. 주로 복잡한 객체의 생성을 단순화하고, 객체 생성 과정을 분리하여 객체를 조립하는 방법을 제공한다.
```
