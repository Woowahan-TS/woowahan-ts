# [2장] 타입

## 2.1 타입이란

### 자료형으로서의 타입
- 변수는 값을 저장할 수 있는 공간이자 값을 가리키는 상징적인 의미이다.
- 메모리에 값을 효율적으로 저장하기 위해선 메모리 공간을 차지할 값의 크기를 알아야 한다.
- 따라서 메모리에 타입 종류를 선언함으로써 메모리 공간을 효율적으로 사용할 수 있다.
```md
- undefined
- null
- Boolean
- String
- Symbol
- Numeric (Number와 BigInt)
- Object
```
```md
🧐 짚고 넘어가기

Symbol 타입이란?
  - ECMAScript 2015 (ES6)에 도입된 기본 자료형 중 하나.
  - 유일하고 변경 불가능한 원시 값으로, 주로 객체 속성의 키로 사용.
  - 주된 목적은 이름 충돌의 위험 없이 객체에 유일한 속성을 추가하는 것.

```tsx
let sym1 = Symbol("key");
let sym2 = Symbol("key");
console.log(sym1 === sym2); // false

let sym = Symbol("description here");
let obj = {
  [sym]: "Symbol Value"
};
console.log(obj[sym]); // "Symbol Value"
```

### 집합으로서의 타입
- 프로그래밍에서 타입은 수학의 집합과 유사하다.
- 타입은 값이 가질 수 있는 유효한 범위의 집합을 말한다.
- 타입 시스템은 런타임에서 발생할 수 있는 유효하지 않은 값에 대한 에러를 방지한다.
```tsx
function double(n:number){
  return n*2;
}

double(2); //4
double('z'); //Error: Argument of type 'string' is not assignable to parameter of type 'number'
```

### 정적 타입과 동적 타입
- 타입을 결정하는 시점에 따라 정적 타입과 동적 타입으로 분류된다.
- 정적 타입 시스템에서는 모든 변수의 타입이 컴파일타임에 결정된다. (C, 자바, 타입스크립트)
- 동적 타입 시스템에서는 변수 타입이 런타임에서 결정된다. (파이썬, 자바스크립트)
```md
🧐 짚고 넘어가기

컴파일타임과 런타임?
  - 컴파일타임: 기계(컴퓨터, 엔진)가 소스코드를 이해할 수 있도록 기계어로 변환되는 시점
  - 런타임: 컴파일타임 이후 변환된 파일이 메모리에 적재되어 실행되는 시점
```

### 강타입과 약타입
- 컴파일러 또는 엔진 등에 의해서 런타임에 타입이 자동으로 변경되는 것을 '암묵적 타입 변환'이라고 한다.
- 암묵적 타입 변환 여부에 따라 타입 시스템을 '강타입'과 '약타입'으로 분류할 수 있다.
- '강타입'은 서로 다른 타입끼리 연산을 시도할 때 에러가 발생한다.
- '약타입'은 컴파일러 또는 인터프리터가 내부적으로 판단해서 타입을 변환하여 값을 도출한다.
- 타입스크립트는 '강타입', 자바스크립트는 '약타입'

### 컴파일 방식
- 컴파일은 사람이 이해할 수 있는 방식으로 작성한 코드를 컴퓨터가 이해할 수 있는 기계어로 바꾸는 과정이다.
- 타입스크립트를 컴파일하면 타입이 모두 제거된 자바스크립트 소스코드만 남는다.

<br/>

## 2.2 타입스크립트의 타입 시스템

### 타입 애너테이션 방식
- 타입 애너테이션이란 변수나 상수 혹은 함수의 인자와 반환 값에 타입을 명시적으로 선언해서 어떤 값이 저장될 것인지를 컴파일러에 직접 알려주는 문법.
- 타입스크립트에서는 변수 이름 뒤에 : type 구문을 붙여 데이터 타입을 명시해준다.
```tsx
let isDone: boolean = false;
let decimal: number = 6;
let color: string = "blue";
let list: number[] = [1, 2, 3];
let x [string, number]; //tuple
```

### 구조적 타이핑
- 타입스크립트에서는 이름으로 구분하는 명목적인 타입 언어의 특징과 달리 구조로 타입을 구분한다. (구조적 타이핑)
- 즉, 타입스크립트에서는 객체의 실제 구조만 일치하면, 이름이 달라도 같은 타입으로 간주한다.
```tsx
interface Developer {
  faceValue: number;
}

interface BankNote {
  faceValue: number;
}

let developer: Developer = { faceValue: 52 };
let bankNote: BankNote = { faceValue: 10000 };

developer = bankNote; //ok
bankNote = developer; //ok
```

### 구조적 서브타이핑
- 구조적 서브타이핑은 구조적 타이핑의 한 형태로, 한 타입이 다른 타입의 서브타입 일때 사용되는 개념.
- 서브타입이란 기본 타입의 모든 조건을 만족하면서 추가적인 속성이나 메소드를 가지는 타입.
- 한 타입이 다른 타입의 모든 요구사항을 충족시키면서 더 많은 기능을 제공할 때, 그 타입은 원래 타입의 서브타입.
```tsx
interface Pet {
  name: string;
}

interface Cat {
  name: string;
  age: number;
}

let pet: Pet;
let cat: Cat = { name: "Zag", age: 2 };

pet = cat; //ok
```
- 즉, 타입이 계층 구조로부터 자유롭다.

### 자바스크립트를 닮은 타입스크립트
- 타입스크립트가 구조적 타이핑을 채택한 이유는 자바스크립트를 모델링한 언어이기 때문이다.
- 자바스크립트는 본질적으로 덕 타이핑을 기반으로 한다.
- 덕 타이핑은 어떤 함수의 매개변숫값이 올바르게 주어진다면 그 값이 어떻게 만들어졌는지 신경 쓰지 않고 사용한다는 개념.
- 덕 타이핑과 구조적 타이핑의 차이는 타입을 검사하는 시점에 있다.
- 덕 타이핑은 런타임에 타입을 검사하고 구조적 타이핑은 컴파일타임에 타입체커가 타입을 검사한다.
- 즉, 덕 타이핑은 주로 동적 타이핑에서 사용되고 구조적 타이핑은 주로 정적 타이핑에서 사용된다.
```md
🧐 짚고 넘어가기

덕 타이핌?
  - 어떤 타입에 부합하는 변수와 메서드를 가질 경우 해당 타입에 속하는 것으로 간주.
  ex) "만약 어떤 새가 오리처럼 걷고, 헤엄치며 꽥꽥거리는 소리를 낸다면 나는 그 새를 오리라고 부를 것이다."
```

### 구조적 타이핑의 결과
- 타입스크립트 구조적 타이핑의 특징 때문에 예기치 못한 결과가 나올 때도 있다.
- 즉, 다른 타입값이 들어간 추가 객체도 할당이 가능하기 때문에 문제가 발생하는 것이다.
- 이러한 한계를 극복하고자 타입스크립트에 명목적 타이핑 언어의 특징을 가미한 식별할 수 있는 '유니온' 같은 방법이 생겨났다.

### 타입스크립트의 점진적 타입 확인
- 타입스크립트는 점진적으로 타입을 확인하는 언어다.
- 점진적 타입 검사란 컴파일 타임에 타입을 검사하면서 필요에 따라 타입 선언 생략을 허용하는 방식이다.
- 타입을 지정한 변수와 표현식은 정적으로 타입을 검사하지만 타입 선언이 생략되면 동적으로 검사를 수행한다.
- 타입 선언을 생략하면 암시적 타입 변환이 일어난다.
```md
🧐 짚고 넘어가기

any 타입
  - 타입스크립트에서 any 타입은 타입스크립트 내 모든 타입의 종류를 포함하는 가장 상위 타입으로 어떤 타입 값이든 할당할 수 있다.
  - 다만, 타입스크립트로 코드를 작성할 때는 정확한 타이핑을 위해 tsconfig의 noInplicitAny 옵션을 true로 설정하는 게 좋다.
```

### 값 vs 타입
- 값은 프로그램이 처리하기 위해 메모리에 저장하는 모든 데이터. 프로그래밍 관점에서는 문자열, 숫자, 변수, 매개변수 등이 값에 해당한다.
- 타입스크립트는 변수, 매개변수, 객체 속성 등에 : type 형태로 타입을 명시한다.
- 값 공간과 타입 공간의 이름은 서로 충돌하지 않는다.
```tsx
type Developer = { isWorking: true };
const Developer = { isTyping: true }; //ok
```
- 자바스크립트 ES6에서 등장한 클래스는 객체 인스턴스를 더욱 쉽게 생성하기 위한 문법 기능으로 실제 동작은 함수와 같다.
```tsx
class Rectangle {
  constructor(height, width) {
    this.height = height;
    this.width = width;
  }
}

const rect1 = new Rectangle(5, 4);
```
- 동시에 클래스는 타입으로도 사용된다. 즉 타입스크립트 코드에서 클래스는 값과 타입 공간 모두에 포함될 수 있다.
```tsx
class Developer {
  name: string;
  domain: string;

  constructor(name: string, domain: string){
    this.name = name;
    this.domain = domain;
  }
}

const me: Developer = new Developer("zig", "frontend");
```
- 변수명 me 뒤에 등장하는 : Developer에서 Developer는 타입에 해당하지만 new 키워드 뒤의 Developer는 클래스의 생성자 함수인 값으로 동작한다.
- 클래스와 마찬가지로 enum 역시 런타임에 객체로 변환되는 값이다.
- enum은 런타임에 실제 객체로 존재하며, 함수로 표현할 수도 있다.
