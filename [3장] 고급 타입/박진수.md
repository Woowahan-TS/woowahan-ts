# [3장] 고급 타입
## 3.1 타입스크립트만의 독자적 타입 시스템
### any 타입
- any 타입은 자바스크립트에 존재하는 모든 값을 오류 없이 받을 수 있다.
- 즉, 자바스크립트에서의 기본적인 사용 방식과 같으므로 타입을 명시하지 않은 것과 동일한 효과를 나타낸다.
- any로 지정한 타입에 어떠한 값을 할당하더라도 오류가 발생하지 않는다.
```tsx
let state: any;

state = { value: 0 }; // 객체를 할당해도
state = 100; // 숫자를 할당해도
state = "hello world"; // 문자열을 할당해도
state.foo.bar = () => console.log("this is any type"); // 중첩 구조로 들어가 함수를 할당해도 문제없다.
```
- 그러나 타입스크립트에서 any 타입을 어쩔 수 없이 사용해야 할 때가 있는데 대표적으로 3가지 사례를 들 수 있다.
  - 개발 단계에서 임시로 값을 지정해야 할 때
    - 개발 과정에서 추후 값이 변경될 가능성이 있는 경우
    - 아직 세부 항목에 대한 타입이 확정되지 않은 경우
  - 어떤 값을 받아올지 또는 넘겨줄지 정할 수 없을 때
    - API 요청 및 응답 처리
    - 타입이 정제되지 않아 파악이 힘든 외부 라이브러리
  - 값을 예측할 수 없을 때
    - 외부 라이브러리나 웹 API의 요청에 따라 다양한 값을 반환하는 API가 존재할 수 있다.
   
### unknown 타입
- unknown 타입은 any 타입과 유사하게 모든 타입의 값이 할당될 수 있다.
- 그러나 any를 제외한 다른 타입으로 선언된 변수에는 unknown 타입 값을 할당할 수 없다.
```tsx
let unknownValue: unknown;

unknownValue = 100; // any 타입과 유사하게 숫자이든
unknownValue = "hello world"; // 문자열이든
unknownValue = () => console.log("this is any type"); // 함수이든 상관없이 할당이 가능하지만

let someValue: any = unknownValue; // (O) any 타입으로 선언된 변수를 제외한 다른 변수는 모두 할당이 불가
let someValue2: number = unknownValue; // (X)
let someValue3: string = unknownValue; // (X)
```
- unknown 타입은 이름처럼 무엇이 할당될지 아직 모르는 상태의 타입을 말한다.
- 그런데 unknown 타입은 할당 시점에는 문제가 없는데 호출 시 문제가 생긴다.
```tsx
// 할당하는 시점에서는 에러가 발생하지 않음
const unknownFunction: unknown = () => console.log("this is unknown type");

// 하지만 실행 시에는 에러가 발생; Error: Object is of type 'unknown'.ts
unknownFunction();
```
- 이는 unknown 타입이 어떤 타입이 할당되었는지 알 수 없음을 나타내기 때문에 unknown 타입으로 선언된 변수는 값을 가져오거나 내부 속성에 접근할 수 없기 때문이다.
- 즉, unknown 타입으로 할당된 변수는 어떤 값이든 올 수 있지만 동시에 개발자에게 엄격한 타입 검사를 강제하는 의도를 담고 있다.
```tsx
let value: unknown;

// value 변수에 값을 할당
value = "Hello, TypeScript!"; // 문자열 할당
value = 123; // 숫자 할당
value = { name: "John" }; // 객체 할당

// value를 사용하기 전에 타입을 확인해야 함
if (typeof value === "string") {
    console.log(value.toUpperCase()); // 문자열 메소드 사용 가능
} else if (typeof value === "number") {
    console.log(value.toFixed(2)); // 숫자 메소드 사용 가능
}
```
- 만약 typeof로 타입을 체크하지 않고 사용한다면 컴파일러에서 오류를 발생시킨다.

### void 타입
- 타입스크립트에서는 함수에 전달되는 매개변수의 타입과 반환하는 타입을 지정해야 한다.
```tsx
function showModa(type: ModalType): void {
  feedbackSlice.actions.createModal(type);
}

// 화살표 함수로 작성 시
const showModal = (type: ModalType): void => {
  feedbackSlice.actions.createModal(type);
}
```
- 자바스크립트에서는 함수에서 명시적인 반환문을 작성하지 않으면 기본적으로 undefined가 반환된다.
- 그러나 타입스크립트에서는 void 타입이 사용되는데 이것은 undefined가 아니다.
- void 타입은 주로 함수 반환 타입으로 사용되지만 사실 함수에 국한된 타입은 아니다. (그치만 함수가 아닌 값에 대해서는 대부분 무의미하다)

### never 타입
- never 타입은 값을 반환할 수 없는 타입을 말한다.
- 여기서 우린 값을 반환하지 않는 것과 반환할 수 없는 것을 명확히 구분해야 한다.
- 자바스크립트에서 값을 반환할 수 없는 예는 크게 2가지로 나눌 수 있다.
  - 에러를 던지는 경우
    - 자바스크립트에서는 런타임에 의도적으로 에러를 발생시키고 캐치할 수 있다.
    - throw 키워드를 사용하면 에러를 발생시킬 수 있는데, 이는 값을 반환하지 않는 것으로 간주한다.
    - 따라서 특정 함수가 실행 중 마지막에 에러를 던지는 작업을 수행한다면 해당 함수의 반환 타입은 never이다.
  - 무한히 함수가 실행되는 경우
    - 드물지만 함수 내에서 무한 루프를 실행하는 경우가 있을 수 있다.
    - 무한 루프는 결국 함수가 종료되지 않음을 의미하기 때문에 값을 반환하지 못한다.
       
